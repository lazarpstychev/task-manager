<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task Manager по дни (Data-Driven)</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-4">
  <h1 class="text-3xl font-bold text-center mb-6">Task Manager по дни (Data-Driven)</h1>

  <!-- Секцията с дните -->
  <div class="grid grid-cols-7 gap-4 mb-6">
    <div class="bg-white p-3 rounded shadow" id="Monday">
      <h2 class="font-bold text-center mb-2">Понеделник</h2>
      <ul class="taskList"></ul>
    </div>
    <div class="bg-white p-3 rounded shadow" id="Tuesday">
      <h2 class="font-bold text-center mb-2">Вторник</h2>
      <ul class="taskList"></ul>
    </div>
    <div class="bg-white p-3 rounded shadow" id="Wednesday">
      <h2 class="font-bold text-center mb-2">Сряда</h2>
      <ul class="taskList"></ul>
    </div>
    <div class="bg-white p-3 rounded shadow" id="Thursday">
      <h2 class="font-bold text-center mb-2">Четвъртък</h2>
      <ul class="taskList"></ul>
    </div>
    <div class="bg-white p-3 rounded shadow" id="Friday">
      <h2 class="font-bold text-center mb-2">Петък</h2>
      <ul class="taskList"></ul>
    </div>
    <div class="bg-white p-3 rounded shadow" id="Saturday">
      <h2 class="font-bold text-center mb-2">Събота</h2>
      <ul class="taskList"></ul>
    </div>
    <div class="bg-white p-3 rounded shadow" id="Sunday">
      <h2 class="font-bold text-center mb-2">Неделя</h2>
      <ul class="taskList"></ul>
    </div>
  </div>

  <script>
    // Добавяне на задача в съответния ден
    function addTaskToDay(task, day) {
      if (!task || !day) return;
      const li = document.createElement('li');
      li.className = 'flex justify-between items-center bg-gray-50 p-2 rounded mb-1';
      li.innerHTML = `
        <span>${task}</span>
        <button onclick="removeTask(this)" class="text-red-500 hover:text-red-700">Изтрий</button>
      `;
      const dayList = document.querySelector(`#${day} .taskList`);
      if (dayList) dayList.appendChild(li);
    }

    function removeTask(btn) {
      btn.parentElement.remove();
    }

    // Зареждане на CSV от URL (GitHub Pages)
    async function loadCSV(url) {
      const res = await fetch(url);
      const text = await res.text();
      const lines = text.trim().split('\n');
      const headers = lines[0].split(',');
      const taskIndex = headers.indexOf('Task');
      const dayIndex = headers.indexOf('Day');

      for (let i = 1; i < lines.length; i++) {
        const cols = lines[i].split(',');
        const task = cols[taskIndex].trim();
        const day = cols[dayIndex].trim();
        addTaskToDay(task, day);
      }
    }

    // Замени с твоя GitHub Pages линк към tasks.csv
    const csvURL = 'https://<USERNAME>.github.io/task-manager/tasks.csv';
    loadCSV(csvURL);
  </script>
</body>
</html>
